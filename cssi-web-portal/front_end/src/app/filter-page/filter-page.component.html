<mat-toolbar color="primary" class="toolbar"
  >Filter Data<span class="push-links-right"></span
  ><a routerLink="/home" class="color-white">Go Home</a></mat-toolbar
>
<body class="background">
  <p class="header-text">Select Data</p>
  <mat-accordion class="search-bar">
    <mat-expansion-panel
      class="search-expansion-box"
      (opened)="panelOpenState = true"
      (closed)="panelOpenState = false"
    >
      <!--This block indicates if the panel is open or not and adjusts the variable panelOpenState to the appropriate state-->
      <mat-expansion-panel-header>
        <mat-panel-title> Sort your data here! </mat-panel-title>
        <mat-panel-description>
          {{
            panelOpenState
              ? "Choose the parameters you'd like to view"
              : "Click me!"
          }}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <img
        src="../../assets/placeholder_cat.jfif"
        alt="Grey cat sitting on couch"
      />
    </mat-expansion-panel>
  </mat-accordion>

  <!-- Filters need to be reintroduced into the tables when I can reliably display data -->
  <!-- Filters need to be refined further -->

  <!-- Filter for Records -->
  <!-- <mat-form-field appearance="fill">
    <mat-label>Filter Records</mat-label>
    <input matInput [(ngModel)]="recordsFilter">
  </mat-form-field> -->

  <!-- Filter for Payload -->
  <!-- <mat-form-field appearance="fill">
    <mat-label>Filter payload</mat-label>
    <input matInput [(ngModel)]="payloadFilter">
  </mat-form-field> -->

  <!-- Filter for Metadata -->
  <!-- <mat-form-field appearance="fill">
    <mat-label>Filter metadata</mat-label>
    <input matInput [(ngModel)]="metadataFilter">
  </mat-form-field> -->

  <!--  Payload Table -->
  <table mat-table [dataSource]="records" class="mat-elevation-z8">
    <!-- Dev_eui Column -->
    <ng-container matColumnDef="Dev_eui">
      <th mat-header-cell *matHeaderCellDef> dev_eui </th>
      <td mat-cell *matCellDef="let element"> {{element.dev_eui}} </td>
    </ng-container>

    <!-- Dev_time Column -->
    <ng-container matColumnDef="Dev_time">
      <th mat-header-cell *matHeaderCellDef> dev_time </th>
      <td mat-cell *matCellDef="let element"> {{element.dev_time}} </td>
    </ng-container>

    <!-- Payload Columns / Dynamic -->
    <ng-container *ngFor="let column of payloadColumns" [matColumnDef]="column">
      <th mat-header-cell *matHeaderCellDef> {{ column }} </th>
      <td mat-cell *matCellDef="let element"> {{ element.payload_dict[column] }} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['Dev_eui', 'Dev_time'].concat(payloadColumns)"></tr>
    <tr mat-row *matRowDef="let row; columns: ['Dev_eui', 'Dev_time'].concat(payloadColumns);"></tr>


  </table>

  <!--  Metadata Table -->
  <table mat-table [dataSource]="records" class="mat-elevation-z8">
    <!-- Dev_eui Column -->
    <ng-container matColumnDef="Dev_eui">
      <th mat-header-cell *matHeaderCellDef> dev_eui </th>
      <td mat-cell *matCellDef="let element"> {{element.dev_eui}} </td>
    </ng-container>

    <!-- Dev_time Column -->
    <ng-container matColumnDef="Dev_time">
      <th mat-header-cell *matHeaderCellDef> dev_time </th>
      <td mat-cell *matCellDef="let element"> {{element.dev_time}} </td>
    </ng-container>

    <!-- Metadata Columns / Dynamic -->
    <ng-container *ngFor="let column of metadataColumns" [matColumnDef]="column">
      <th mat-header-cell *matHeaderCellDef> {{ column }} </th>
      <td mat-cell *matCellDef="let element"> {{ element.metadata_dict[column] }} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['Dev_eui', 'Dev_time'].concat(metadataColumns)"></tr>
    <tr mat-row *matRowDef="let row; columns: ['Dev_eui', 'Dev_time'].concat(metadataColumns);"></tr>
    
  </table>


  <app-temp-nav-bar></app-temp-nav-bar>
</body>
